CREATE DATABASE Restaurant
GO
USE Restaurant
GO   
	CREATE TABLE MENU(
		M_ID VARCHAR(8) PRIMARY KEY,
		MT_ID VARCHAR(8) NOT NULL,
		M_Name NVARCHAR(50),
		M_Price FLOAT,
		M_Img VARCHAR(255)	
	)
	GO

	CREATE TABLE MENU_TYPES(
		MT_ID VARCHAR(8) PRIMARY KEY,
		MT_Name NVARCHAR(50)
	)
	GO

	CREATE TABLE EMPLOYEES(
		E_ID VARCHAR(8) PRIMARY KEY,
		E_Name NVARCHAR(50),
		E_Position NVARCHAR(25),
		E_Gender INT
	)
	GO

	CREATE TABLE BILLS(
		B_ID INT PRIMARY KEY,
		E_ID VARCHAR(8) NOT NULL,
		B_Date DATETIME,
		B_Payment FLOAT
	)
	GO

	CREATE TABLE BILL_DETAILS(
		B_ID INT NOT NULL,
		M_ID VARCHAR(8) NOT NULL,
		BD_Count INT,
		BD_Price FLOAT
	)
	GO

	CREATE TABLE MATERIALS(
		MA_ID VARCHAR(8) PRIMARY KEY,
		MA_T_ID VARCHAR(8) NOT NULL,
		MA_Name NVARCHAR(50),
		MA_Supplier NVARCHAR(25),
		MA_Unit NVARCHAR(10),
		MA_Count INT,
		MA_Cost FLOAT,
		MA_Expiration_Date DATETIME,
		MA_Import_Date DATETIME
	)
	GO

	CREATE TABLE MATERIAL_TYPES(
		MA_T_ID VARCHAR(8) PRIMARY KEY,
		MA_T_Name NVARCHAR(50)
	)
	GO

	CREATE TABLE CANCEL_MATERIALS(
		E_ID VARCHAR(8) NOT NULL,
		MT_ID VARCHAR(8) NOT NULL,
		C_MA_Date DATETIME,
		C_MA_Reason NVARCHAR(255),
		C_MA_Count INT
	)
	GO

	CREATE TABLE TABLE_DETAILS(
		TD_ID VARCHAR(8) PRIMARY KEY,
		TD_Position NVARCHAR(50),
	)
	GO

	CREATE TABLE ORDERS(
		O_ID VARCHAR(8) PRIMARY KEY,
		M_ID VARCHAR(8) NOT NULL,
		TD_ID VARCHAR(8) NOT NULL,
		O_Count INT
	)
	GO

	CREATE TABLE INGREDIENTS(
		M_ID VARCHAR(8) NOT NULL,
		MA_ID VARCHAR(8) NOT NULL,
		I_Count FLOAT
	)
	GO

	CREATE TABLE PROMOTE(
		P_ID VARCHAR(8) PRIMARY KEY,
		M_ID VARCHAR(8) NOT NULL,
		P_Discount INT,
		P_Content NVARCHAR(255),
		P_Date_Start DATETIME,
		P_Date_End DATETIME
	)
	GO
	--------data binding
ALTER TABLE MENU ADD CONSTRAINT FK_MT_ID FOREIGN KEY (MT_ID)REFERENCES MENU_TYPES(MT_ID)
GO
ALTER TABLE BILLS ADD CONSTRAINT FK_E_ID FOREIGN KEY (E_ID) REFERENCES EMPLOYEES(E_ID)
GO
ALTER TABLE BILL_DETAILS ADD CONSTRAINT FK_B_ID FOREIGN KEY (B_ID) REFERENCES BILLS(B_ID)
GO
ALTER TABLE BILL_DETAILS ADD CONSTRAINT FK_M_ID FOREIGN KEY (M_ID) REFERENCES MENU(M_ID)
GO
ALTER TABLE MATERIALS ADD CONSTRAINT FK_MA_T_ID FOREIGN KEY (MA_T_ID) REFERENCES MATERIAL_TYPES(MA_T_ID)
GO
ALTER TABLE CANCEL_MATERIALS ADD CONSTRAINT FK2_E_ID FOREIGN KEY (E_ID) REFERENCES EMPLOYEES(E_ID)
GO
ALTER TABLE CANCEL_MATERIALS ADD CONSTRAINT FK2_MT_ID FOREIGN KEY (MT_ID) REFERENCES MENU_TYPES(MT_ID)
GO
ALTER TABLE ORDERS ADD CONSTRAINT FK3_M_ID FOREIGN KEY (M_ID) REFERENCES MENU(M_ID)
GO
ALTER TABLE ORDERS ADD CONSTRAINT FK_TD_ID FOREIGN KEY (TD_ID) REFERENCES TABLE_DETAILS(TD_ID)
GO
ALTER TABLE INGREDIENTS ADD CONSTRAINT FK1_M_ID FOREIGN KEY (M_ID) REFERENCES MENU(M_ID)
GO
ALTER TABLE INGREDIENTS ADD CONSTRAINT FK_MA_ID FOREIGN KEY (MA_ID) REFERENCES MATERIALS(MA_ID)
GO
ALTER TABLE PROMOTE ADD CONSTRAINT FK4_M_ID FOREIGN KEY (M_ID) REFERENCES MENU(M_ID)
GO
----------ADD DATA

---------MENU_TYPES
INSERT INTO MENU_TYPES VALUES('IT',N'Trà Ngọt/ Inspired tea')
INSERT INTO MENU_TYPES VALUES('CF',N'Cà phê/ Coffee')
--INSERT INTO MENU_TYPES VALUES('HJ',N'Nước ép/ Fresh juice')
--INSERT INTO MENU_TYPES VALUES('SM',N'Sinh tố/ Smoothes')
INSERT INTO MENU_TYPES VALUES('ST',N'Khai vị/ Starter')
--INSERT INTO MENU_TYPES VALUES('SL',N'Gỏi/ Salad')
--INSERT INTO MENU_TYPES VALUES('SS',N'Món cuốn/ Spring roll')
INSERT INTO MENU_TYPES VALUES('SP',N'Canh/ Soup')
INSERT INTO MENU_TYPES VALUES('RC',N'Cơm/ Rice')
INSERT INTO MENU_TYPES VALUES('PK',N'Thịt Heo/ Pork')
--INSERT INTO MENU_TYPES VALUES('PR',N'Tôm/ Prawn')
--INSERT INTO MENU_TYPES VALUES('CK',N'Thịt gà/ Chicken')
--INSERT INTO MENU_TYPES VALUES('VG',N'Rau củ/ Vegetable')

--------MENU
INSERT INTO MENU VALUES('IT001','IT',N'Trà tắc vải','58000','')
INSERT INTO MENU VALUES('IT002','IT',N'Trà hạt é lá dứa','58000','')
INSERT INTO MENU VALUES('IT003','IT',N'Trà đen, thạch đào','58000','')

INSERT INTO MENU VALUES('CF001','CF',N'Cà phê đen','58000','')
INSERT INTO MENU VALUES('CF002','CF',N'Cà phê sữa','68000','')
INSERT INTO MENU VALUES('CF003','CF',N'Bạc xỉu','68000','')
INSERT INTO MENU VALUES('CF004','CF',N'Cà phê đá','58000','')

INSERT INTO MENU VALUES('ST001','ST',N'Bò lá lốt','108000','')
INSERT INTO MENU VALUES('ST002','ST',N'Cánh gà sốt me','98000','')
INSERT INTO MENU VALUES('ST003','ST',N'Thác lác chiên thì là','108000','')

INSERT INTO MENU VALUES('SP001','SP',N'Súp bắp tôm','65000','')
INSERT INTO MENU VALUES('SP002','SP',N'Canh tôm bầu','108000','')
INSERT INTO MENU VALUES('SP003','SP',N'Canh chua cá dứa','128000','')

INSERT INTO MENU VALUES('RC001','RC',N'Cơm trắng','18000','')
INSERT INTO MENU VALUES('RC002','RC',N'Cơm rang bò, cải chua','128000','')
INSERT INTO MENU VALUES('RC003','RC',N'Cơm chiên cá mặn, cá cơm giòn','128000','')

INSERT INTO MENU VALUES('PK001','PK',N'Thịt heo kho tộ','118000','')
INSERT INTO MENU VALUES('PK002','PK',N'Sườn nướng sốt tiêu đen','138000','')
INSERT INTO MENU VALUES('PK003','PK',N'Sườn nướng mật ong','138000','')

-----MATERIAL_TYPES
INSERT INTO MATERIAL_TYPES VALUES('MACF',N'Cà phê')
INSERT INTO MATERIAL_TYPES VALUES('MAML',N'Sữa')
INSERT INTO MATERIAL_TYPES VALUES('MAIC',N'Nước đá')

INSERT INTO MATERIAL_TYPES VALUES('MAPK',N'Heo')
INSERT INTO MATERIAL_TYPES VALUES('MARC',N'Gạo')
INSERT INTO MATERIAL_TYPES VALUES('MABF',N'Bò')
INSERT INTO MATERIAL_TYPES VALUES('MAVB',N'Rau củ')
INSERT INTO MATERIAL_TYPES VALUES('MAFS',N'Cá')
INSERT INTO MATERIAL_TYPES VALUES('MAPR',N'Tôm')
INSERT INTO MATERIAL_TYPES VALUES('MACK',N'Gà')

------MATERIALS
INSERT INTO MATERIALS VALUES('MACF001','MACF',N'Cà phê hạt xay',N'Công ty A',N'Kg/1000g','10','1590000','08/18/2019','')
INSERT INTO MATERIALS VALUES('MAML001','MAML',N'Sữa đặc',N'Công ty A',N'Hộp/380g','10','212000','08/18/2019','')
INSERT INTO MATERIALS VALUES('MAIC001','MAIC',N'Nước đá',N'Công ty A',N'Kg/1000g','10','180000','08/18/2019','')

INSERT INTO MATERIALS VALUES('MARC001','MARC',N'Gạo thơm lài',N'Công ty B',N'Kg/1000g','100','15000000','08/18/2019','')

----INGREDIENTS
INSERT INTO INGREDIENTS VALUES('RC001','MARC001','0.005') ----THÀNH PHẦN CƠM TRẮNG

INSERT INTO INGREDIENTS VALUES('CF001','MACF001','0.002') -----THÀNH PHẦN CF ĐÁ
INSERT INTO INGREDIENTS VALUES('CF001','MAIC001','0.01')
